<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>วิวัฒนาการสถาปัตยกรรมข้อมูล กฟภ.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Navy (Core), Teal (Flow), Red (Problem) -->
    <!-- Application Structure Plan: แบ่ง SPA เป็น 3 ยุคตามลำดับเวลา: 1. ยุคเริ่มต้น (Batch File), 2. ยุค HANA Fulluse (Data Pass-Through), 3. ยุคข้อเสนอ (iPaaS + EDP - 5 Rows). โครงสร้างนี้ออกแบบมาเพื่อเล่าเรื่องราวความท้าทายของ PEA ในการจัดการ Data Integration โดยเฉพาะยุค 3 เน้น iPaaS เป็นศูนย์กลางเชื่อมโยงระหว่าง Source (R1) และ Consumer (R5) -->
    <!-- Visualization & Content Choices: 1. Architecture Diagrams (HTML/Tailwind Flexbox) -> Goal: แสดงภาพรวมของสถาปัตยกรรม, ทิศทางการไหลของข้อมูล/คิว, และปัญหาในแต่ละยุค -> Interaction: Clickable cards to show key findings; 2. Problem/Flow Indicators (Unicode Arrows and Text) -> Goal: แสดงประเภทการไหล (วิ่ง vs คิววิ่ง) และจุดที่เกิดคอขวด -> Lib: HTML/CSS/Tailwind -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Kanit', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
        }
        .header-bg {
            background-color: #0f172a; /* Navy */
        }
        .text-accent {
            color: #14b8a6; /* Teal */
        }
        .arch-container {
            @apply bg-white p-6 rounded-xl shadow-xl border-t-8 border-slate-300 mb-8;
        }
        .system-box {
            /* **[EDIT: text-center for all system boxes, as requested]** */
            @apply bg-slate-100 p-3 rounded-lg border border-slate-300 text-center text-sm font-semibold whitespace-nowrap;
        }
        .flow-arrow {
            @apply text-2xl font-extrabold mx-2;
            flex-shrink: 0;
        }
        .flow-label {
            @apply text-xs font-semibold mt-1;
        }
        .problem-tag {
            @apply bg-red-100 text-red-700 px-2 py-0.5 rounded-full text-xs font-bold shadow-sm;
        }
        .solution-tag {
             @apply bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full text-xs font-bold shadow-sm;
        }
        .risk-box {
            @apply bg-red-100 p-3 rounded-lg border border-red-500 mt-4;
        }
        .flow-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: #14b8a6; /* Teal */
            z-index: 0;
        }
        .rotated {
            transform: rotate(90deg);
            width: 100px; /* Adjust height/width for rotation */
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="header-bg py-6 mb-8 shadow-xl">
        <div class="container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-2xl sm:text-3xl font-extrabold text-white text-center">
                วิวัฒนาการสถาปัตยกรรมข้อมูล กฟภ.
            </h1>
            <p class="text-slate-400 text-center mt-1 text-sm">การเดินทางจาก Batch File สู่ Hybrid Data Platform</p>
        </div>
    </div>

    <div class="container max-w-7xl mx-4 sm:px-6 lg:px-8 pb-16 space-y-12">

        <!-- Stage 1: Batch File Era -->
        <section id="era-1" class="arch-container border-t-red-500">
            <h2 class="text-2xl font-bold text-red-700 mb-4">ยุคที่ 1: ปัญหา SAP License และ Batch File DCR</h2>
            <p class="text-slate-600 mb-6">ยุคที่ค่า **SAP License** สูง และ **Tibco Bus** ไม่สามารถเป็น Bus กลางที่แท้จริงได้ ทำให้เกิดการแก้ปัญหาด้วยการสร้าง **Non-SAP App** และใช้การ **Export File (Batch)** แทนการเชื่อมต่อแบบ Real-Time</p>

            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                <div class="system-box bg-blue-500 text-white">SAP (ERP/ธุรกิจหลัก)</div>

                <div class="flex flex-col items-center">
                    <div class="flow-arrow text-red-500">⇢</div>
                    <div class="flow-label text-red-500">ข้อมูลวิ่ง (Export File/Batch)</div>
                    <div class="problem-tag mt-1">ช้า 1 วัน</div>
                </div>

                <div class="system-box bg-yellow-500 text-slate-800">FTP Server/Queue</div>

                <div class="flex flex-col items-center">
                    <div class="flow-arrow text-red-500">⇢</div>
                    <div class="flow-label text-red-500">ข้อมูลวิ่ง (Import/Batch)</div>
                    <div class="problem-tag mt-1">ข้อมูลไม่ตรงกัน</div>
                </div>

                <div class="system-box bg-teal-500 text-white">Non SAP App</div>
            </div>

            <div class="mt-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <h3 class="font-bold text-red-700">ปัญหาหลักของยุคนี้:</h3>
                <ul class="list-disc list-inside text-sm text-slate-700 ml-4">
                    <li>**Data Inconsistency:** ข้อมูล SAP กับ Non SAP App ไม่ตรงกัน (ช้าประมาณ 1 วัน)</li>
                    <li>**High Overhead:** กระบวนการ DCR/Export File มีภาระงานสูงและซ้ำซ้อน</li>
                </ul>
            </div>
        </section>

        <!-- Stage 2: HANA Fulluse Era -->
        <section id="era-2" class="arch-container border-t-orange-500">
            <h2 class="text-2xl font-bold text-orange-700 mb-4">ยุคที่ 2: HANA Fulluse (Data Pass-Through)</h2>
            <p class="text-slate-600 mb-6">นำ HANA Fulluse มาเป็น Decoupling Layer เพื่อแก้ปัญหาความไม่สดใหม่ของข้อมูล (Data Freshness) และให้ข้อมูลไหลเร็วขึ้น</p>

            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                <div class="system-box bg-blue-500 text-white">SAP</div>

                <div class="flex flex-col items-center">
                    <div class="flow-arrow text-orange-500">⇶</div>
                    <div class="flow-label text-orange-500">ข้อมูลวิ่ง (Real-Time Ingestion)</div>
                    <div class="solution-tag mt-1">Data Freshness OK</div>
                </div>

                <div class="system-box bg-orange-500 text-slate-800">HANA Fulluse</div>
                
                <div class="flex flex-col items-center">
                    <div class="flow-arrow text-orange-500">⇶</div>
                    <div class="flow-label text-orange-500">ข้อมูลวิ่ง (API/View)</div>
                </div>

                <div class="system-box bg-teal-500 text-white">Non SAP App</div>
            </div>
            
            <div class="mt-6 p-4 bg-orange-50 rounded-lg border border-orange-200">
                <h3 class="font-bold text-orange-700">ปัญหาหลักของยุคนี้:</h3>
                <ul class="list-disc list-inside text-sm text-slate-700 ml-4">
                    <li>**Misaligned Use:** จ่ายค่า License แพง (In-Memory) เพื่อทำแค่ Pass-Through</li>
                    <li>**Performance Conflict:** ไม่สามารถรองรับงาน Analytics ของทีม กจข. ได้ (เพราะกลัวกระทบ Non SAP App)</li>
                    <li>**Storage Constraint:** พื้นที่จำกัด (6 เดือน) ล้มเหลวในการเป็น **SSoT (Single Source of Truth)** ที่แท้จริง</li>
                </ul>
            </div>
        </section>

        <!-- Stage 3: Strategic Solution Era (The Future) -->
        <section id="era-3" class="arch-container border-t-teal-500">
            <h2 class="text-2xl font-bold text-teal-700 mb-4">ยุคที่ 3: สถาปัตยกรรมทางเลือกที่ยั่งยืน (iPaaS + EDP)</h2>
            <p class="text-slate-600 mb-6">ทางออกที่คุ้มค่ากว่า: ยุติ HANA Fulluse และใช้ **iPaaS** เป็น Bus กลางในการจัดการ Load และใช้ **Enterprise Data Platform (EDP)** เป็น Analytical Core ที่แท้จริง โดย EDP ทำหน้าที่ **"สะสมข้อมูล Historical"** เพื่องาน Data Analytics และมีราคาถูกกว่า HANA Fulluse</p>

            <div class="flex flex-col space-y-4">
                
                <!-- Row 1: Source and Analytical Core (Top) -->
                <div class="flex justify-around items-center space-x-8">
                    <div class="system-box bg-blue-500 text-white w-40 text-center">SAP (ERP & UTP)</div>
                    <div class="system-box bg-slate-700 text-white w-52 text-center">Enterprise Data Platform (EDP) / Exadata <br><span class="text-xs font-normal">(Analytical Query / Historical, รวม กจข. Analytics)</span></div>
                </div>

                <!-- Row 2: Ingestion Flow Labels (SAP <-> iPaaS <-> EDP) -->
                <div class="flex justify-around items-center h-12">
                    <div class="flex flex-col items-center w-1/2">
                        <div class="flow-arrow text-teal-600">↑↓</div> 
                        <div class="flow-label text-teal-600 text-center">SAP ⇢ iPaaS: Ingestion & Protection</div>
                    </div>
                    <div class="flex flex-col items-center w-1/2">
                        <div class="flow-arrow text-teal-600">↑↓</div> 
                        <div class="flow-label text-teal-600 text-center">iPaaS ⇢ EDP: Data Consolidation</div>
                    </div>
                </div>

                <!-- Row 3: iPaaS Bus (Center) -->
                <div class="flex justify-center items-center h-20">
                    <div class="system-box bg-purple-500 text-white w-56 relative z-10 text-center">
                        iPaaS (Bus กลาง)
                        <div class="flow-label text-teal-200 text-center mt-1">คิววิ่ง/ข้อมูลวิ่ง (CDC)</div>
                    </div>
                </div>
                
                <!-- Row 4: Consumption Flow Labels (iPaaS <-> Apps/Others) -->
                <div class="flex justify-around items-center h-12">
                    <div class="flex flex-col items-center w-1/2">
                        <div class="flow-arrow text-teal-600">↑↓</div> 
                        <div class="flow-label text-teal-600 text-center">iPaaS ⇢ Non SAP App: Real-Time Pass-Through</div>
                    </div>
                    <div class="flex flex-col items-center w-1/2">
                        <div class="flow-arrow text-teal-600">↑↓</div> 
                        <div class="flow-label text-teal-600 text-center">iPaaS ⇢ ระบบอื่น ๆ: Data Product/API Gateway</div>
                    </div>
                </div>

                <!-- Row 5: Destination Apps and Consumers (Bottom) -->
                <div class="flex justify-around items-center space-x-8">
                    <div class="system-box bg-teal-500 text-white w-40 text-center">Non SAP App</div>
                    <div class="system-box bg-teal-500 text-white w-52 text-center">ระบบงานสำคัญอื่น ๆ</div>
                </div>
                
            </div>

            <div class="risk-box">
                <br><h3 class="font-bold text-red-700 mb-2">⚠︎ ความเสี่ยงหลักที่ต้องพิจารณา ว่าเลิกใช้ Fulluse ได้หรือไม่</h3>
                <ul class="list-disc list-inside text-sm text-slate-700 ml-4 space-y-1">
                    <li>**ความเสี่ยง SAP ERP Connection:** SAP ERP (ซึ่งเป็นระบบหลัก) อาจมีปัญหาด้านการเชื่อมต่อ (Compatibility) กับ iPaaS โดยตรง เนื่องจาก **SAP UTP** เท่านั้นที่รับประกันการเชื่อมต่อ</li>
                    <li>**ความเสี่ยง Non-SAP App Modification:** การเปลี่ยน End-point จาก HANA Fulluse มาเป็น iPaaS อาจทำให้ต้อง **แก้ไขโค้ด** ใน Non-SAP App ที่เคยพึ่งพาโครงสร้างข้อมูลของ HANA Fulluse เดิม</li>
                    <li>**ความเสี่ยงการใช้งาน Fulluse แบบเต็มประสิทธิภาพ:** ต้องตรวจสอบก่อนว่าระบบในปัจจุบันมีการใช้งาน **In-Memory Features** ที่ซับซ้อนของ HANA Fulluse ในงานใดบ้างหรือไม่ เพื่อประเมินมูลค่าเชิงเทคนิคที่ต้องคงไว้</li>
                </ul>
            </div>
        </section>

    </div>

</body>
</html>
